{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "Tantrums",
    "scopeName": "source.tantrums",
    "fileTypes": [
        "42AHH",
        "42ahh"
    ],
    "patterns": [
        {
            "include": "#mode-directive"
        },
        {
            "include": "#comments"
        },
        {
            "include": "#strings"
        },
        {
            "include": "#numbers"
        },
        {
            "include": "#imports"
        },
        {
            "include": "#func-declarations"
        },
        {
            "include": "#typed-variables"
        },
        {
            "include": "#func-calls"
        },
        {
            "include": "#keywords"
        },
        {
            "include": "#types"
        },
        {
            "include": "#builtins"
        },
        {
            "include": "#constants"
        },
        {
            "include": "#compound-operators"
        },
        {
            "include": "#operators"
        }
    ],
    "repository": {
        "mode-directive": {
            "patterns": [
                {
                    "comment": "Mode directive: #mode static/dynamic/both",
                    "match": "(#mode)\\s+(static|dynamic|both)",
                    "captures": {
                        "1": {
                            "name": "keyword.preprocessor.mode.tantrums"
                        },
                        "2": {
                            "name": "constant.language.mode.tantrums"
                        }
                    }
                }
            ]
        },
        "comments": {
            "patterns": [
                {
                    "name": "comment.line.double-slash.tantrums",
                    "match": "//.*$"
                },
                {
                    "name": "comment.block.tantrums",
                    "begin": "/\\*",
                    "end": "\\*/"
                }
            ]
        },
        "strings": {
            "patterns": [
                {
                    "name": "string.quoted.double.tantrums",
                    "begin": "\"",
                    "end": "\"",
                    "patterns": [
                        {
                            "name": "constant.character.escape.tantrums",
                            "match": "\\\\[ntr0\\\\\"']"
                        },
                        {
                            "name": "invalid.illegal.escape.tantrums",
                            "match": "\\\\[^ntr0\\\\\"']"
                        }
                    ]
                }
            ]
        },
        "numbers": {
            "patterns": [
                {
                    "name": "constant.numeric.float.tantrums",
                    "match": "\\b[0-9]+\\.[0-9]+\\b"
                },
                {
                    "name": "constant.numeric.integer.tantrums",
                    "match": "\\b[0-9]+\\b"
                }
            ]
        },
        "imports": {
            "patterns": [
                {
                    "comment": "Import: use filename.42AHH;",
                    "match": "\\b(use)\\s+([^;]+)",
                    "captures": {
                        "1": {
                            "name": "keyword.control.import.tantrums"
                        },
                        "2": {
                            "name": "string.unquoted.import.tantrums"
                        }
                    }
                }
            ]
        },
        "func-declarations": {
            "patterns": [
                {
                    "comment": "Function with return type: tantrum int name(",
                    "match": "\\b(tantrum)\\s+(int|float|string|bool|list|map)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=\\()",
                    "captures": {
                        "1": {
                            "name": "keyword.declaration.tantrums"
                        },
                        "2": {
                            "name": "storage.type.return.tantrums"
                        },
                        "3": {
                            "name": "entity.name.function.tantrums"
                        }
                    }
                },
                {
                    "comment": "Function without return type: tantrum name(",
                    "match": "\\b(tantrum)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=\\()",
                    "captures": {
                        "1": {
                            "name": "keyword.declaration.tantrums"
                        },
                        "2": {
                            "name": "entity.name.function.tantrums"
                        }
                    }
                }
            ]
        },
        "func-calls": {
            "patterns": [
                {
                    "comment": "Function call: name(",
                    "match": "\\b([a-zA-Z_][a-zA-Z0-9_]*)\\s*(?=\\()",
                    "captures": {
                        "1": {
                            "name": "entity.name.function.call.tantrums"
                        }
                    }
                }
            ]
        },
        "keywords": {
            "patterns": [
                {
                    "name": "keyword.control.tantrums",
                    "match": "\\b(if|else|while|for|in|return|throw|try|catch)\\b"
                },
                {
                    "name": "keyword.declaration.tantrums",
                    "match": "\\b(tantrum)\\b"
                },
                {
                    "name": "keyword.operator.logical.tantrums",
                    "match": "\\b(and|or)\\b"
                },
                {
                    "name": "keyword.memory.tantrums",
                    "match": "\\b(alloc|free)\\b"
                },
                {
                    "name": "keyword.other.tantrums",
                    "match": "\\b(use|foreign|STRICT)\\b"
                }
            ]
        },
        "types": {
            "patterns": [
                {
                    "name": "storage.type.tantrums",
                    "match": "\\b(int|float|string|bool|list|map)\\b"
                }
            ]
        },
        "builtins": {
            "patterns": [
                {
                    "name": "support.function.builtin.tantrums",
                    "match": "\\b(print|input|len|range|type|append|getCurrentTime|toSeconds|toMilliseconds|toMinutes|toHours|getProcessMemory|getVmMemory|getVmPeakMemory|bytesToKB|bytesToMB|bytesToGB)\\b(?=\\s*\\()"
                }
            ]
        },
        "constants": {
            "patterns": [
                {
                    "name": "constant.language.boolean.tantrums",
                    "match": "\\b(true|false)\\b"
                },
                {
                    "name": "constant.language.null.tantrums",
                    "match": "\\b(null)\\b"
                }
            ]
        },
        "compound-operators": {
            "patterns": [
                {
                    "name": "keyword.operator.compound.tantrums",
                    "match": "(\\+\\+|--|\\+=|-=|\\*=|/=|%=)"
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.comparison.tantrums",
                    "match": "(==|!=|<=|>=|=>|=<|<|>)"
                },
                {
                    "name": "keyword.operator.logical.symbol.tantrums",
                    "match": "(&&|\\|\\||!)"
                },
                {
                    "name": "keyword.operator.arithmetic.tantrums",
                    "match": "(\\+|-|\\*|/|%)"
                },
                {
                    "name": "keyword.operator.assignment.tantrums",
                    "match": "="
                },
                {
                    "name": "keyword.operator.pointer.tantrums",
                    "match": "&"
                }
            ]
        },
        "typed-variables": {
            "patterns": [
                {
                    "comment": "Typed variable: type name",
                    "match": "\\b(int|float|string|bool|list|map)\\s+([a-zA-Z_][a-zA-Z0-9_]*)\\b(?!\\s*\\()",
                    "captures": {
                        "1": {
                            "name": "storage.type.tantrums"
                        },
                        "2": {
                            "name": "variable.other.tantrums"
                        }
                    }
                }
            ]
        }
    }
}